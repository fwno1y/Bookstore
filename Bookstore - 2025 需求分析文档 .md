# Bookstore - 2025 需求分析文档
## Part I
### 业务流图
---
![](https://notes.sjtu.edu.cn/uploads/upload_7d3ca54b4833c97517d9c59a25d1f25a.png)

---
## Part II
### 数据流图
---
![](https://notes.sjtu.edu.cn/uploads/upload_12107f4136909b0aac82522e065be2ca.png)

---
## Part III
### 数据词典
---
1.  用户信息

| name     | type   | description                |
| -------- | ------ | -------------------------- |
| ID       | string | 用户ID，用于标识用户，登录 |
| password | string | 用户密码，用于注册和登录                           |
| permission | int | 用户权限等级，0：游客 1：顾客 2：销售人员 3：店长                           |

2. 图书信息

| name      | type              | description    | limit          |
| --------- | ----------------- | -------------- | -------------- |
| ISBN      | string            | 图书的唯一标识 | 20个字符       |
| name      | string            | 书名           | 60个字符       |
| author    | string            | 作者           | 60个字符       |
| keyword   | `vector <string>` | 关键词         | 不超过60个字符 |
| inventory | int               | 库存量         | 无             |
| price     | double            | 单价           | 非负           |

3. 采购信息

| name  | type   | description    |
| ----- | ------ | -------------- |
| ISBN  | string | 图书的唯一标识 |
| num   | int    | 采购数量       |
| price | double | 单价           |

4. 销售信息

| name  | type   | description    |
| ----- | ------ | -------------- |
| ISBN  | string | 图书的唯一标识 |
| num   | int    | 采购数量       |
| price | double | 单价           |

5. 盈利信息

| name    | type   | description |
| ------- | ------ | ----------- |
| income  | double | 收入        |
| expense | double | 支出        |
| profit  | double | 利润        |

6. 员工信息

| name      | type   | description |
| --------- | ------ | ----------- |
| operation | string | 操作类型    |
| object    | string | 操作对象    |
| ID        | string | 员工信息    |
| time      | int    | 操作时间    |

7. 工作日志

| name      | type   | description |
| --------- | ------ | ----------- |
| operation | string | 操作类型    |
| object    | string | 操作对象    |
| ID        | string | 操作者信息    |
| time      | int    | 操作时间    |

---
## Part IV
### 功能说明
---

#### 1.用户模块

| 功能 | 输入                           | 输出       | 所做的处理                     |
| ---- | ------------------------------ | ---------- | ------------------------------ |
| 注册 | 用户名（ID）、密码（password） | “注册成功” | 将新创建的用户加入用户数据库中 |
| 登录 | 用户名（ID）、密码（password） | “登录成功” | 授予用户相应的操作权限       |
| 退出 | 用户名（ID）、密码（password） | “退出成功” | 消除用户权限               |


#### 2.图书模块

| 功能 | 输入                                 | 输出                               | 所做的处理                     |
| ---- | ------------------------------------ | ---------------------------------- | ------------------------------ |
| 录入 | ISBN、书名、作者、关键词、数量、单价 | “录入成功”                         | 将图书全部信息录入图书数据库中 |
| 查询 | ISBN/书名/作者/关键字                | “查询成功”，以及符合条件的图书信息 | 在图书数据库中查找对应的图书   |
| 修改 | ISBN                                 | “修改成功”                         | 把对应修改上传到图书数据库     |


#### 3.销售模块

| 功能         | 输入                           | 输出                               | 所做的处理                                         |
| ------------ | ------------------------------ | ---------------------------------- | -------------------------------------------------- |
| 进货         | ISBN、数量、进货价格、进货时间 | “进货成功”                         | 采购图书，将对应信息录入采购数据库和工作日志数据库 |
| 购买         | ISBN、数量、时间                     | “购买成功”                         | 把购买的数据上传至销售/盈利数据库和工作日志数据库  |
| 查询采购情况 | 采购时间                       | “查询成功”，以及对应时间的采购数据 | 从采购数据库中得到对应的采购信息                   |
| 查询销售情况 | 销售时间                       | “查询成功”，以及对应时间的销售数据 | 从销售/盈利数据库中得到对应的销售信息              |
| 查询盈利情况 | 时间                           | “查询成功”，以及对应时间的盈利数据 | 从销售/盈利数据库中得到对应的盈利信息              |


#### 4.工作日志模块

| 功能         | 输入                                                       | 输出                               | 所做的处理                               |
| ------------ | ---------------------------------------------------------- | ---------------------------------- | ---------------------------------------- |
| 插入工作日志 | 操作类型、操作者、操作时间                       | “插入成功”                         | 将此次命令加入工作日志数据库中           |
| 查询工作日志 | 操作类型/操作时间/操作者（同时实现查询员工的工作情况报告） | “查询成功”，以及对应的工作日志信息 | 从工作日志数据库中得到对应的工作日志信息 |
                                     


---
## Part V
### 用户交互设计

#### 1.用户模块

| 命令 | 输入                           | 输出       | 
| ---- | ------------------------------ | ---------- | 
| 注册 | register [ID] [password] | “注册成功” | 
| 登录 | login [ID] [password] | “登录成功” | 
| 退出 | exit [ID] [password] | “退出成功” | 


#### 2.图书模块

| 命令 | 输入                                               | 输出                               |
| ---- | -------------------------------------------------- | ---------------------------------- |
| 录入 | add [ISBN] [name] [author] [keyword] [price]       | “录入成功”                         |
| 查询 | querybook [ISBN/name/author/keyword]               | “查询成功”，以及符合条件的图书信息 |
| 修改 | modify [ISBN] [type(修改类型)] [messege(修改信息)] | “修改成功”                         |
                                 


#### 3.交易模块

| 命令         | 输入                                 | 输出                               |
| ------------ | ------------------------------------ | ---------------------------------- |
| 进货         | purchase [ISBN] [num] [price] [time] | “进货成功”                         |
| 购买         | sell [ISBN] [num] [time]                   | “购买成功”                         |
| 查询采购情况 | querypurchase [time]                 | “查询成功”，以及对应时间的采购数据 |
| 查询销售情况 | querysell [time]                     | “查询成功”，以及对应时间的销售数据 |
| 查询盈利情况 | queryprofit [time]                   | “查询成功”，以及对应时间的盈利数据 |


#### 4.工作日志模块

| 命令         | 输入                      | 输出                               |
| ------------ | ------------------------- | ---------------------------------- |
| 插入工作日志 | insert [type] [ID] [time] | “插入成功”                         |
| 查询工作日志 | querylog [type/time/ID]   | “查询成功”，以及对应的工作日志信息 |

## 补充

> 关于输出部分：
> 1. 若权限不足,则输出"Permission denied"
> 2. 图书信息按照 [ISBN] [name] [author] [keyword] [price] 输出
> 3. 以上中文输出会翻译为英文，如“查询成功”译为"Query is successful"